---
id: deploy-manager-aws-console
title: AWSへのインストール
description: CloudFormation テンプレートを使用してマネージャをデプロイする方法を学習します。
sidebar_label: AWSへのインストール
sidebar_position: 1
pagination_prev: null
pagination_next: null
---

# AWSにマネージャをインストールする

始める前に、 [前提条件](./index.md#prerequisites) が満たされており、AWS アカウントが [要件](../resources/aws-requirements.md)を満たしていることを確認してください。

AI Unlimited マネージャはエンジンのデプロイを調整し、セットアップ用の Web ベースのユーザー インターフェイスを備えています。 

AWS Management Consoleからマネージャをインストールするには、Teradata が提供する CloudFormation テンプレートを使用します。マネージャが [systemd](../glossary.md#systemd)によって制御されるコンテナ内で実行されるサーバーインスタンスをデプロイします。

:::tip
インストールに関するヘルプについては、 <a href="mailto:aiunlimited.support@Teradata.com">サポート チーム</a> にメールを送信するか、 [コミュニティ](https://support.teradata.com/community?id=community_forum&sys_id=b0aba91597c329d0e6d2bd8c1253affa)にお問い合わせください。
:::


## リポジトリをクローンする

import MyPartial from '../_partials/_clone-repo.mdx';

<MyPartial />


## マネージャ テンプレートを見つける

マネージャ用の CloudFormation テンプレートは、AI Unlimited GitHub リポジトリにあります。

`deployments/aws/templates/ai-unlimited/`

[ロード バランサ](../glossary.md#load-balancer) を使用するかどうか、およびどのタイプを使用するかに基づいてテンプレートを選択します。
:::note
組織のクラウド管理者にガイダンスを依頼することをお勧めします。
:::
    \- `ai-unlimited-with-alb.yaml`—アプリケーションロードバランサー の背後にあるマネージャをホストする(../glossary.md#application-load-balancer)
    \- `ai-unlimited-with-nlb.yaml`—ネットワークロードバランサー の背後にあるマネージャをホストする(../glossary.md#network-load-balancer)
    \- `ai-unlimited-without-lb.yaml`—ロードバランサーなし。どのテンプレートを使用するかわからない場合は、このテンプレートをお勧めします。


## テンプレートを読み込む	

1. [AWS コンソール](https://aws.amazon.com)にサインインします。<br />
   :::note
   AWS Management Consoleへの参照は、2024 年 5 月 29 日時点で最新です。
   ::: 
2. AI Unlimited をデプロイする AWS リージョンを選択します。<br />
主な勤務地に最も近い地域を選択することをお勧めします。
3. **CloudFormation**を検索して移動します。
4. **スタックを作成**を選択し、次に **新しいリソース（標準）**を選択します。
5. **既存のテンプレートを選択する**を選択し、次に **テンプレートファイルをアップロードする**を選択します。
6. 使用するテンプレートファイルを選択し、 **次へ**をクリックします。  

<a id="aws-parms"></a>


## スタックの詳細とオプションを指定する

1. スタック名を指定します。
2. パラメータを確認します。必須パラメータの値を指定します。組織によっては他のパラメータが必要になる場合があります。<br/>

<details>

<summary>AWSとマネージャパラメータ</summary>

 テンプレートごとにパラメータは異なります。コンソールには表示されないパラメータがここに表示されることがあります。
 
| パラメータ | 説明 | 注意事項 | 
|---------|-------------|-----------|
| スタック名	| スタックのリストから AI Unlimited スタックを見つけるのに役立つ識別子。 |必須<br/>デフォルト: NA<br/> 名前には英数字 (大文字と小文字が区別されます) とハイフンのみを含めることができます。名前は英字で始まる必要があり、128 文字を超えることはできません。| | 名前には、英数字 (大文字と小文字が区別されます) とハイフンのみを含めることができます。名前は英字で始まる必要があり、128 文字を超えることはできません。|
|AiUnlimitedName| AI Unlimited インスタンスの名前。 |デフォルトで必須<br/>デフォルト: ai-unlimited<br/>名前には、英数字 (大文字と小文字が区別されます) とハイフンのみを含めることができます。名前はアルファベットで始まる必要があり、20 文字を超えることはできません。|
| InstanceType | マネージャの EC2 インスタンス タイプ。 |デフォルトでは必須<br/>デフォルト: t3.micro<br/> **重要**: インスタンスのサイズが適切でない場合、エンジンのデプロイと一時停止の障害が発生する可能性があり、より大きなインスタンスにマネージャを再インストールする必要があります。  パラメータ セクションの下にある *詳細: Manager インスタンス タイプ (サイズ) の推奨事項* を参照してください。 |
| RootVolumeSize | インスタンスに接続するルートディスクのサイズ（GB 単位）。 | デフォルトで必須<br/>デフォルト: 20<br/>8 ～ 1000 の値をサポートします。 |
| TerminationProtection | インスタンス終了保護を有効にします。 |デフォルトで必須<br/>デフォルト: false |
|IamRole | CloudFormation が新しい IAM ロールを作成するか、既存のロールを使用するかを指定します。 |デフォルトで必須<br/>デフォルト: 新規<br/>サポートされているオプション: 新規または既存 |
|IamRoleName | インスタンスに割り当てるIAMロールの名前。既存のIAMロールまたは  新しく作成されたもの。 |オプション、デフォルトあり<br/>デフォルト: ai-unlimited-iam-role<br/>新しい IAM ロールに名前を付ける場合、CloudFormation では CAPABILITY_NAMED_IAM 機能が必要です。自動生成された名前を使用するには、これを空白のままにします。 |
|IamPermissionsBoundary	| インスタンスに割り当てられた IAM ロールに関連付ける IAM アクセス許可境界の ARN。 |オプション<br/>デフォルト: NA |
|AvailabilityZone | インスタンスをデプロイするアベイラビリティーゾーン。 |必須<br/>デフォルト: NA<br/>値はサブネット、既存のボリュームのゾーンと一致する必要があり、インスタンス タイプは選択したゾーンで使用可能である必要があります。 |
|LoadBalancerScheme	|ロードバランサーが使用されている場合、このフィールドはインスタンスがインターネットからアクセスできるか、または VPC 内からのみアクセスできるかを指定します。	|オプション、デフォルトあり<br/>デフォルト: インターネット向け<br/>インターネット向けロードバランサーの DNS 名は、ノードのパブリック IP アドレスにパブリックに解決可能です。したがって、インターネット向けロードバランサーは、インターネット経由でクライアントからのリクエストをルーティングできます。<br/>内部ロードバランサーのノードにはプライベート IP アドレスのみがあります。内部ロードバランサーの DNS 名は、ノードの個人 IP アドレスにパブリックに解決可能です。したがって、内部ロードバランサーは、ロードバランサーの VPC にアクセスできるクライアントからのリクエストをルーティングできます。|
|LoadBalancerSubnetOne | ロード バランサーがホストされているサブネット。サブネットによって、ロード バランサーの可用性ゾーン、IP アドレス、およびエンドポイントが決まります。 |オプション、デフォルトあり<br/>デフォルト: NA<br/>ネットワーク ロード バランサー (NLB) を作成するには、使用可能なサブネットを少なくとも 1 つ定義し、アプリケーション ロード バランサー (ALB) にはサブネットを 2 つ定義する必要があります。|
| LoadBalancerSubnetTwo| ロードバランサーがホストされているサブネット。 |オプション。このオプションは、ALB を含むテンプレートでのみ使用できます。<br/>デフォルト: NA<br/>|このサブネットは、最初に選択したサブネットとは異なるアベイラビリティーゾーンに存在する必要があります。|
|HostedZoneID | ホストゾーンの作成時に Amazon Route 53 によって割り当てられた ID。|オプション<br/>デフォルト: NA<br/>各ホストゾーンはドメイン名、またはサブドメインに対応します。ホストゾーンは DNS レコードのコンテナであり、レコードを持つ IP アドレスを指すなど、世界がドメインと対話する方法を設定します。<br/>AWS コンソールで、**Route 53** &gt; **ホストゾーン** に移動します。登録したドメイン名と対応するホストゾーン ID を見つけます。|
|DnsName| ドメイン名。パブリック ホスト ゾーンの場合、これは DNS レジストラに登録した名前です。 |オプション<br/>デフォルト: NA<br/>az、0-9、- (ハイフン) 以外の文字を指定する方法と国際化ドメイン名を指定する方法については、[ホストゾーンの作成](https://docs.aws.amazon.com/Route53/latest/APIReference/API_CreateHostedZone.html) を参照してください。|
|Private	|サービスがパブリック IP のないプライベート ネットワークにデプロイされるかどうかを指定します。|必須<br/>デフォルト: false <br/>マネージャが存在するサブネットで「パブリック IPv4 アドレスの自動割り当てを有効にする」オプションが選択されていることを確認してください。このオプションが選択されていない場合、インストールが失敗する可能性があります。|
|Session	|AWS Session Manager を使用してインスタンスにアクセスできるかどうかを指定します。|必須<br/>デフォルト: false |
|Vpc		|インスタンスをデプロイするネットワーク。|必須<br/>デフォルト: NA|
|Subnet	|インスタンスをデプロイするサブネットワーク。|必須<br/>デフォルト: NA<br/>サブネットは、選択した可用性ゾーンに存在する必要があります。|
|KeyName		|インスタンスの起動後にインスタンスに安全に接続できるようにする公開/秘密キーのペア。AWS アカウントを作成するときに、優先リージョンで作成するキー ペアです。|オプション<br/>デフォルト: NA<br/>SSH キーを含めない場合は、このフィールドを空白のままにします。|
|AccessCIDR	|インスタンスへのアクセスが許可される CIDR IP アドレスの範囲。 |オプション<br/>デフォルト: NA<br/>この値は信頼できる IP 範囲に設定することをお勧めします。カスタム セキュリティ グループ イングレス ルールを作成しない限り、受信トラフィックを許可するには、AccessCIDR、PrefixList、または SecurityGroup の少なくとも 1 つを定義します。|
|PrefixList	|インスタンスとの通信に使用できるプレフィックス リスト。同じポリシーの適用を必要とする一連の IP アドレス範囲を定義する CIDR ブロックのコレクションです。|オプション<br/>デフォルト: NA<br/>カスタム セキュリティ グループ イングレス ルールを作成しない限り、受信トラフィックを許可するには、AccessCIDR、PrefixList、または SecurityGroup の少なくとも 1 つを定義します。ID ではなく、プレフィックス リスト名を入力してください。|
|SecurityGroup	|インスタンスへの受信トラフィックと送信トラフィックを制御する仮想ファイアウォール。 |オプション<br/>デフォルト: NA<br/>インスタンスへのアクセスを許可するプロトコル、ポート、IP アドレスまたは CIDR ブロックを指定するルール セットとして実装されます。カスタム セキュリティ グループ イングレス ルールを作成しない限り、受信トラフィックを許可するには、AccessCIDR、PrefixList、または SecurityGroup の少なくとも 1 つを定義します。|
|AIUnlimitedHttpPort		|AI Unlimited UI にアクセスするためのポート。|デフォルトで必須<br/>デフォルト: 3000|
|AIUnlimitedGrpcPort		|AI Unlimited API にアクセスするためのポート。|デフォルトで必須<br/>デフォルト: 3282|
|AIUnlimitedVersion		|デプロイする AI Unlimited のバージョン。|デフォルトで必須<br/>デフォルト: latest<br/>値はコンテナのバージョン タグです。|
|UsePersistentVolume|データの保存に新しい永続ボリュームを使用するか、既存の永続ボリュームを使用するかを指定します。パラメータ セクションの下の「*詳細: 永続ボリュームの使用*」を参照してください。 |オプション、デフォルト<br/>デフォルト: 新規<br/>サポートされるオプションは、使用ケースに応じて、新しい永続ボリュームまたは既存のボリュームです。|
|PersistentVolumeSize	|インスタンスに接続する永続ボリュームのサイズ（GB 単位）。|デフォルトで必須<br/>デフォルト: 20<br/>8 ～ 1000 の値をサポートします。 |
|ExistingPersistentVolumeId		|インスタンスに接続する既存の永続ボリュームの ID。 |UsePersistentVolume が Existing に設定されている場合は必須です。<br/>デフォルト: NA<br/>永続ボリュームは、AI Unlimited インスタンスと同じアベイラビリティーゾーンに存在する必要があります。|
|PersistentVolume<br/>DeletionPolicy		|CloudFormation デプロイメントを削除するときの永続ボリュームの動作。|デフォルトで必須|Delete <br/>デフォルト: Retain <br/>サポートされているオプションは、Delete、Retain、RetainExceptOnCreate、および Snapshot です。|
|LatestAmiId	|AMI の最新バージョンを指すイメージの ID。この値は SSM ルックアップに使用されます。|デフォルトでは必須<br/>デフォルト: NA<br/>このデプロイメントでは、利用可能な最新の ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2 イメージが使用されます。<br/>**重要**: この値を変更すると、スタックが壊れる可能性があります。

</details>

<details>

<summary>詳細: マネージャインスタンスタイプ (サイズ) の推奨事項</summary>

AI Unlimited の有料パブリック プレビューでは、同時エンジンのデプロイおよび一時停止操作の量に基づいて、これらの t3 インスタンス タイプをお勧めします。その他の利用可能なインスタンス タイプのパフォーマンスは異なる場合があります。

| インスタンスタイプ | 同時操作 |
|---------|-------------|
|t3.micro |1 |
|t3.small |最大5 |
|t3.medium |最大10 |
|t3.large |最大20 |
|t3.xlarge |21以上 

AI Unlimited が一般公開されると、同時実行性が向上します。

</details>

<details>

<summary>もっと学ぶ.: 永続ボリュームの使用</summary>

マネージャ インスタンスはコンテナ内で実行され、その構成データをインスタンスのルート ボリューム内のデータベースに保存します。このデータは、インスタンスをシャットダウン、再起動、またはスナップショットを作成して再起動しても保持されます。 

永続ボリュームは、コンテナ化されたアプリケーションのデータを、それが実行されるコンテナ、ポッド、またはノードの有効期間を超えて保存します。 


**永続ボリュームなし**

コンテナ、ポッド、またはノードがクラッシュまたは終了すると、マネージャの構成データが失われます。新しいマネージャ インスタンスをデプロイすることはできますが、失われたインスタンスと同じ状態にすることはできません。


**永続ボリュームの場合**

コンテナ、ポッド、またはノードがクラッシュまたは終了し、マネージャの構成データが永続ボリュームに保存されている場合は、失われたものと同じ構成を持つ新しいマネージャ インスタンスをデプロイできます。


**例**

1. マネージャをデプロイし、次のパラメータを含めます。
   - `UsePersistentVolume`: **New**
   - `PersistentVolumeDeletionPolicy`: **Retain**
2. スタックを作成したら、**Outputs** タブで `volume-id` をメモします。
3. AI Unlimited を使用します。
4. マネージャ インスタンスが失われた場合は、マネージャを再度デプロイし、次のパラメーターを含めます。
   - `UsePersistentVolume`: **New**
   - `PersistentVolumeDeletionPolicy`: **Retain** 
   - `ExistingPersistentVolumeId`: 手順 2 でメモした値
   
 新しいマネージャ インスタンスは、失われたものと同じ構成を持ちます。

</details>


3. **次へ**を選択します。
4. 必要に応じて[スタック オプションを構成する](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-add-tags.html) 場合、 **次へ**を選択します。 


## スタックを確認して作成する

1. テンプレートの設定を確認します。 
2. テンプレートによって IAM リソースが作成されることを確認するには、チェックボックスをオンにします。 
3. スタックをデプロイするには **送信** を選択します。<br />
**イベント** タブでは進行状況を監視できます。すべてのリソースのステータスが `CREATE_COMPLETE`の場合、マネージャは準備完了です。 

**出力** タブには、作成されたリソースに対して生成された値が表示されます。

マネージャにアクセスして AI Unlimited を設定するには、URL が必要になります。


## 次のステップ

[OAuthアプリを作成する](../resources/create-oauth-app.md) を実行してAI Unlimited と Git プロバイダ アカウント間の認証を許可します。



